{"version":3,"sources":["js/script.js"],"names":["oxo","inputs","listenKeyOnce","screens","loadScreen","game","winner","board","document","getElementById","sign","b","jsboard","attach","size","cell","style","width","height","background","piece_gb","piece","text","textIndent","margin","piece_fb","piece_lb","piece_cb","piece_gr","piece_fr","piece_lr","piece_cr","bluePieces","clone","redPieces","place","classList","add","i","length","addEventListener","dataset","player","showMoves","resetBoard","token","loc","parentNode","where","newLocs","thisPiece","get","mvmt","push","removeIllegalMoves","arr","fixedLocs","slice","bindMoveLocs","bindMovePiece","bindMoveEvents","locs","DOM","on","movePiece","dest","defender","attacker","innerText","console","log","end","removeEvents","remove","distance","Math","max","abs","toggle","r","rows","c","cols","removeOn","endimgp1","endimgp2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,GAAG,CAACC,MAAJ,CAAWC,aAAX,CAAyB,OAAzB,EAAkC,YAAW;AAAK;AAChDF,EAAAA,GAAG,CAACG,OAAJ,CAAYC,UAAZ,CAAuB,MAAvB,EAA+BC,IAA/B,EAD2C,CACK;AACjD,CAFD;AAIA,IAAIC,MAAJ,EAAc;;AAEd,SAASD,IAAT,GAAe;AACb,MAAIE,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAZ;AACA,MAAIC,IAAI,GAAGF,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAX,CAFa,CAIb;;AACA,MAAIE,CAAC,GAAGC,OAAO,CAACL,KAAR,CAAc;AAACM,IAAAA,MAAM,EAAC,aAAR;AAAuBC,IAAAA,IAAI,EAAC;AAA5B,GAAd,CAAR;AACAH,EAAAA,CAAC,CAACI,IAAF,CAAO,MAAP,EAAeC,KAAf,CAAqB;AAACC,IAAAA,KAAK,EAAC,MAAP;AAAeC,IAAAA,MAAM,EAAC;AAAtB,GAArB,EANa,CAQb;;AACAP,EAAAA,CAAC,CAACI,IAAF,CAAO,MAAP,EAAeC,KAAf,CAAqB;AACjBG,IAAAA,UAAU,EAAE;AADK,GAArB,EATa,CAab;;AAEA,MAAIC,QAAQ,GAAGR,OAAO,CAACS,KAAR,CAAc;AAACC,IAAAA,IAAI,EAAC,IAAN;AAAYC,IAAAA,UAAU,EAAC,SAAvB;AAAkCN,IAAAA,KAAK,EAAC,MAAxC;AAAgDC,IAAAA,MAAM,EAAC,MAAvD;AAA+DM,IAAAA,MAAM,EAAC;AAAtE,GAAd,CAAf;AACA,MAAIC,QAAQ,GAAGb,OAAO,CAACS,KAAR,CAAc;AAACC,IAAAA,IAAI,EAAC,IAAN;AAAYC,IAAAA,UAAU,EAAC,SAAvB;AAAkCN,IAAAA,KAAK,EAAC,MAAxC;AAAgDC,IAAAA,MAAM,EAAC,MAAvD;AAA+DM,IAAAA,MAAM,EAAC;AAAtE,GAAd,CAAf;AACA,MAAIE,QAAQ,GAAGd,OAAO,CAACS,KAAR,CAAc;AAACC,IAAAA,IAAI,EAAC,IAAN;AAAYC,IAAAA,UAAU,EAAC,SAAvB;AAAkCN,IAAAA,KAAK,EAAC,MAAxC;AAAgDC,IAAAA,MAAM,EAAC,MAAvD;AAA+DM,IAAAA,MAAM,EAAC;AAAtE,GAAd,CAAf;AACA,MAAIG,QAAQ,GAAGf,OAAO,CAACS,KAAR,CAAc;AAACC,IAAAA,IAAI,EAAC,IAAN;AAAYC,IAAAA,UAAU,EAAC,SAAvB;AAAkCN,IAAAA,KAAK,EAAC,MAAxC;AAAgDC,IAAAA,MAAM,EAAC,MAAvD;AAA+DM,IAAAA,MAAM,EAAC;AAAtE,GAAd,CAAf;AACA,MAAII,QAAQ,GAAGhB,OAAO,CAACS,KAAR,CAAc;AAACC,IAAAA,IAAI,EAAC,IAAN;AAAYC,IAAAA,UAAU,EAAC,SAAvB;AAAkCN,IAAAA,KAAK,EAAC,MAAxC;AAAgDC,IAAAA,MAAM,EAAC,MAAvD;AAA+DM,IAAAA,MAAM,EAAC;AAAtE,GAAd,CAAf;AACA,MAAIK,QAAQ,GAAGjB,OAAO,CAACS,KAAR,CAAc;AAACC,IAAAA,IAAI,EAAC,IAAN;AAAYC,IAAAA,UAAU,EAAC,SAAvB;AAAkCN,IAAAA,KAAK,EAAC,MAAxC;AAAgDC,IAAAA,MAAM,EAAC,MAAvD;AAA+DM,IAAAA,MAAM,EAAC;AAAtE,GAAd,CAAf;AACA,MAAIM,QAAQ,GAAGlB,OAAO,CAACS,KAAR,CAAc;AAACC,IAAAA,IAAI,EAAC,IAAN;AAAYC,IAAAA,UAAU,EAAC,SAAvB;AAAkCN,IAAAA,KAAK,EAAC,MAAxC;AAAgDC,IAAAA,MAAM,EAAC,MAAvD;AAA+DM,IAAAA,MAAM,EAAC;AAAtE,GAAd,CAAf;AACA,MAAIO,QAAQ,GAAGnB,OAAO,CAACS,KAAR,CAAc;AAACC,IAAAA,IAAI,EAAC,IAAN;AAAYC,IAAAA,UAAU,EAAC,SAAvB;AAAkCN,IAAAA,KAAK,EAAC,MAAxC;AAAgDC,IAAAA,MAAM,EAAC,MAAvD;AAA+DM,IAAAA,MAAM,EAAC;AAAtE,GAAd,CAAf,CAtBa,CAwBb;;AACA,MAAIQ,UAAU,GAAG,CACfZ,QAAQ,CAACa,KAAT,EADe,EAEfR,QAAQ,CAACQ,KAAT,EAFe,EAGfR,QAAQ,CAACQ,KAAT,EAHe,EAIfR,QAAQ,CAACQ,KAAT,EAJe,EAKfR,QAAQ,CAACQ,KAAT,EALe,EAMfP,QAAQ,CAACO,KAAT,EANe,EAOfP,QAAQ,CAACO,KAAT,EAPe,EAQfP,QAAQ,CAACO,KAAT,EARe,EASfP,QAAQ,CAACO,KAAT,EATe,EAUfN,QAAQ,CAACM,KAAT,EAVe,EAWfN,QAAQ,CAACM,KAAT,EAXe,CAAjB;AAaA,MAAIC,SAAS,GAAG,CACdN,QAAQ,CAACK,KAAT,EADc,EAEdJ,QAAQ,CAACI,KAAT,EAFc,EAGdJ,QAAQ,CAACI,KAAT,EAHc,EAIdJ,QAAQ,CAACI,KAAT,EAJc,EAKdJ,QAAQ,CAACI,KAAT,EALc,EAMdH,QAAQ,CAACG,KAAT,EANc,EAOdH,QAAQ,CAACG,KAAT,EAPc,EAQdH,QAAQ,CAACG,KAAT,EARc,EASdH,QAAQ,CAACG,KAAT,EATc,EAUdF,QAAQ,CAACE,KAAT,EAVc,EAWdF,QAAQ,CAACE,KAAT,EAXc,CAAhB,CAtCa,CAqDb;AAEA;;AACAtB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAeoB,KAAf,CAAqBH,UAAU,CAAC,CAAD,CAA/B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAeoB,KAAf,CAAqBH,UAAU,CAAC,CAAD,CAA/B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAeoB,KAAf,CAAqBH,UAAU,CAAC,CAAD,CAA/B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAeoB,KAAf,CAAqBH,UAAU,CAAC,CAAD,CAA/B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAeoB,KAAf,CAAqBH,UAAU,CAAC,CAAD,CAA/B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBH,UAAU,CAAC,CAAD,CAA9B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBH,UAAU,CAAC,CAAD,CAA9B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBH,UAAU,CAAC,CAAD,CAA9B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBH,UAAU,CAAC,CAAD,CAA9B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAeoB,KAAf,CAAqBH,UAAU,CAAC,CAAD,CAA/B;AACArB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,EAAD,EAAI,EAAJ,CAAP,EAAgBoB,KAAhB,CAAsBH,UAAU,CAAC,EAAD,CAAhC,EAlEa,CAqEb;;AACAA,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,CAAD,CAAV,CAAcI,SAAd,CAAwBC,GAAxB,CAA4B,MAA5B;AACAL,EAAAA,UAAU,CAAC,EAAD,CAAV,CAAeI,SAAf,CAAyBC,GAAzB,CAA6B,OAA7B;AAEAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,CAAD,CAAT,CAAaE,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAH,EAAAA,SAAS,CAAC,EAAD,CAAT,CAAcE,SAAd,CAAwBC,GAAxB,CAA4B,QAA5B,EA5Fa,CA8Fb;;AACA1B,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,CAAP,EAAcoB,KAAd,CAAoBD,SAAS,CAAC,CAAD,CAA7B;AACAvB,EAAAA,CAAC,CAACI,IAAF,CAAO,CAAC,CAAD,EAAG,EAAH,CAAP,EAAeoB,KAAf,CAAqBD,SAAS,CAAC,EAAD,CAA9B;;AAGA,OAAK,IAAII,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACN,UAAU,CAACO,MAA3B,EAAmCD,CAAC,EAApC,EAAuC;AACrCN,IAAAA,UAAU,CAACM,CAAD,CAAV,CAAcE,gBAAd,CAA+B,OAA/B,EAAwC,YAAW;AAAE,UAAIjC,KAAK,CAACkC,OAAN,CAAcC,MAAd,KAAyB,GAA7B,EAAkC;AACrFC,QAAAA,SAAS,CAAC,IAAD,CAAT;AAAkB;;AAAA;AACnB,KAFD;AAGD;;AAAA;;AAED,OAAK,IAAIL,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACJ,SAAS,CAACK,MAA1B,EAAkCD,CAAC,EAAnC,EAAsC;AACpCJ,IAAAA,SAAS,CAACI,CAAD,CAAT,CAAaE,gBAAb,CAA8B,OAA9B,EAAuC,YAAW;AAAE,UAAIjC,KAAK,CAACkC,OAAN,CAAcC,MAAd,KAAyB,GAA7B,EAAkC;AACpFC,QAAAA,SAAS,CAAC,IAAD,CAAT;AAAkB;;AAAA;AACnB,KAFD;AAGD;;AAED,WAASA,SAAT,CAAmBtB,KAAnB,EAA0B;AACxBuB,IAAAA,UAAU;AAEV,QAAIC,KAAJ,CAHwB,CAGV;;AACd,QAAIC,GAAG,GAAGnC,CAAC,CAACI,IAAF,CAAOM,KAAK,CAAC0B,UAAb,EAAyBC,KAAzB,EAAV;AACA,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIC,SAAS,GAAGvC,CAAC,CAACI,IAAF,CAAOM,KAAK,CAAC0B,UAAb,EAAyBI,GAAzB,EAAhB;;AAEA,QAAI,CAACD,SAAS,IAAE,IAAX,IAAmBA,SAAS,IAAE,IAA/B,KAAwC3C,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAAlE,EAAsE;AACpEP,MAAAA,KAAK,GAAG,KAAR;AACAI,MAAAA,OAAO,CAACI,IAAR,CACE,CAACP,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADF,EACoB,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADpB,EACsC,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADtC,EACwD,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADxD,EAEE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFF,EAEoB,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFpB,EAEsC,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFtC,EAEwD,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFxD,EAGE,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHF,EAGoB,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHpB,EAGsC,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHtC,EAGwD,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHxD,EAIE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJF,EAIoB,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJpB,EAIsC,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJtC,EAIwD,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJxD;AAMD;;AAED,QAAI,CAACI,SAAS,IAAE,IAAX,IAAmBA,SAAS,IAAE,IAA/B,KAAwC3C,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAAlE,EAAsE;AACpEP,MAAAA,KAAK,GAAG,KAAR;AACAI,MAAAA,OAAO,CAACI,IAAR,CACE,CAACP,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADF,EACoB,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADpB,EACsC,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADtC,EAEE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFF,EAEoB,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFpB,EAEsC,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFtC,EAGE,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHF,EAGoB,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHpB,EAGsC,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHtC,EAIE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJF,EAIoB,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJpB,EAIsC,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJtC;AAMD;;AAED,QAAI,CAACI,SAAS,IAAE,IAAX,IAAmBA,SAAS,IAAE,IAA/B,KAAwC3C,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAAlE,EAAsE;AACpEP,MAAAA,KAAK,GAAG,KAAR;AACAI,MAAAA,OAAO,CAACI,IAAR,CACE,CAACP,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADF,EAEE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFF,EAGE,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHF,EAIE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJF;AAMD;;AAED,QAAI,CAACI,SAAS,IAAE,IAAX,IAAmBA,SAAS,IAAE,IAA/B,KAAwC3C,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAAlE,EAAqE;AACnEP,MAAAA,KAAK,GAAG,KAAR;AACAI,MAAAA,OAAO,CAACI,IAAR,CACE,CAACP,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADF,EACoB,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADpB,EAEE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFF,EAEoB,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFpB,EAGE,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHF,EAGoB,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHpB,EAIE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJF,EAIoB,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJpB;AAMD;;AAGD,QAAII,SAAS,IAAE,IAAX,IAAmBA,SAAS,IAAE,IAAlC,EAAwC;AACtCL,MAAAA,KAAK,GAAG,MAAR;AACAI,MAAAA,OAAO,CAACI,IAAR,CACE,CAACP,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADF,EAEE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFF,EAGE,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHF,EAIE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJF;AAMD;;AAED,QAAI,CAACI,SAAS,IAAE,IAAX,IAAmBA,SAAS,IAAE,IAA9B,IAAsCA,SAAS,IAAE,IAAjD,IAAyDA,SAAS,IAAE,IAArE,KAA8E3C,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAAxG,EAA2G;AAAG;AAC5GP,MAAAA,KAAK,GAAG,MAAR;AACAI,MAAAA,OAAO,CAACI,IAAR,CACE,CAACP,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADF,EAEE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFF,EAGE,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHF,EAIE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJF;AAMD;;AAED,QAAI,CAACI,SAAS,IAAE,IAAX,IAAmBA,SAAS,IAAE,IAA9B,IAAsCA,SAAS,IAAE,IAAjD,IAAyDA,SAAS,IAAE,IAArE,KAA8E3C,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAAxG,EAA2G;AACzGP,MAAAA,KAAK,GAAG,MAAR;AACAI,MAAAA,OAAO,CAACI,IAAR,CACE,CAACP,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADF,EACoB,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CADpB,EAEE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFF,EAEoB,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAFpB,EAGE,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHF,EAGoB,CAACA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAR,EAAUA,GAAG,CAAC,CAAD,CAAb,CAHpB,EAIE,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJF,EAIoB,CAACA,GAAG,CAAC,CAAD,CAAJ,EAAQA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAf,CAJpB;AAMD,KA7EuB,CA+ExB;;;AAEA,QAAIvC,KAAK,CAACkC,OAAN,CAAcC,MAAd,KAAyB,GAA7B,EAAkC;AAEhC,OAAC,SAASY,kBAAT,CAA4BC,GAA5B,EAAiC;AAC9B,YAAIC,SAAS,GAAG,EAAhB;;AACA,aAAK,IAAIlB,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACiB,GAAG,CAAChB,MAApB,EAA4BD,CAAC,EAA7B;AACA,cAAI3B,CAAC,CAACI,IAAF,CAAOwC,GAAG,CAACjB,CAAD,CAAV,EAAea,GAAf,MAAwB,IAAxB,IAAgCxC,CAAC,CAACI,IAAF,CAAOwC,GAAG,CAACjB,CAAD,CAAV,EAAea,GAAf,GAAqBM,KAArB,CAA2B,CAAC,CAA5B,KAAkC,GAAtE,EACAD,SAAS,CAACH,IAAV,CAAeE,GAAG,CAACjB,CAAD,CAAlB;AAFA;;AAGAW,QAAAA,OAAO,GAAGO,SAAV,CAL8B,CAKT;AACtB,OANH,EAMKP,OANL;AAOC;;AAAA;;AAEH,QAAI1C,KAAK,CAACkC,OAAN,CAAcC,MAAd,KAAyB,GAA7B,EAAkC;AAEhC,OAAC,SAASY,kBAAT,CAA4BC,GAA5B,EAAiC;AAChC,YAAIC,SAAS,GAAG,EAAhB;;AACA,aAAK,IAAIlB,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACiB,GAAG,CAAChB,MAApB,EAA4BD,CAAC,EAA7B;AACA,cAAI3B,CAAC,CAACI,IAAF,CAAOwC,GAAG,CAACjB,CAAD,CAAV,EAAea,GAAf,MAAwB,IAAxB,IAAgCxC,CAAC,CAACI,IAAF,CAAOwC,GAAG,CAACjB,CAAD,CAAV,EAAea,GAAf,GAAqBM,KAArB,CAA2B,CAAC,CAA5B,KAAkC,GAAtE,EACAD,SAAS,CAACH,IAAV,CAAeE,GAAG,CAACjB,CAAD,CAAlB;AAFA;;AAGAW,QAAAA,OAAO,GAAGO,SAAV;AACD,OAND,EAMGP,OANH;AAOD;;AAAA;AAEDS,IAAAA,YAAY,GAAGT,OAAO,CAACQ,KAAR,EAAf;AACAE,IAAAA,aAAa,GAAGtC,KAAhB;AACAuC,IAAAA,cAAc,CAACF,YAAD,CAAd;;AAEA,aAASE,cAAT,CAAwBC,IAAxB,EAA8B;AAC5B,WAAK,IAAIvB,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACuB,IAAI,CAACtB,MAArB,EAA6BD,CAAC,EAA9B,EAAkC;AAChC3B,QAAAA,CAAC,CAACI,IAAF,CAAO8C,IAAI,CAACvB,CAAD,CAAX,EAAgBwB,GAAhB,GAAsB1B,SAAtB,CAAgCC,GAAhC,CAAoC,sBAApC;AACA1B,QAAAA,CAAC,CAACI,IAAF,CAAO8C,IAAI,CAACvB,CAAD,CAAX,EAAgByB,EAAhB,CAAmB,OAAnB,EAA4BC,SAA5B;AACD;AACF,KAhHuB,CAkHxB;;;AACA,aAASA,SAAT,GAAqB;AACnB,UAAIC,IAAI,GAAGtD,CAAC,CAACI,IAAF,CAAO,IAAP,EAAaiC,KAAb,EAAX;AACA,UAAIkB,QAAQ,GAAGvD,CAAC,CAACI,IAAF,CAAO,IAAP,EAAaoC,GAAb,EAAf;AACA,UAAIgB,QAAQ,GAAG9C,KAAK,CAAC+C,SAArB;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,GAAG,WAAX,GAAyBD,QAArC;;AAEA,cAAQA,QAAR;AACE,aAAK,IAAL;AACA;;AACA;AACE,kBAAOA,QAAQ,CAAC,CAAD,CAAf;AACE,iBAAK,GAAL;AACE,kBAAI3D,KAAK,CAACkC,OAAN,CAAcC,MAAd,KAAyB,GAA7B,EAAkC;AAChCpC,gBAAAA,MAAM,GAAG,CAAT;AACD,eAFD,MAGK,IAAIC,KAAK,CAACkC,OAAN,CAAcC,MAAd,KAAyB,GAA7B,EACHpC,MAAM,GAAG,CAAT;;AACFN,cAAAA,GAAG,CAACG,OAAJ,CAAYC,UAAZ,CAAuB,KAAvB,EAA8BmE,GAA9B;AACA;AARJ;;AAUF;AAdF;;AAiBA5D,MAAAA,CAAC,CAACI,IAAF,CAAO,IAAP,EAAaoB,KAAb,CAAmBd,KAAnB;AACAV,MAAAA,CAAC,CAAC6D,YAAF,CAAe,OAAf,EAAwBR,SAAxB;;AACA,WAAK,IAAI1B,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACW,OAAO,CAACV,MAAxB,EAAgCD,CAAC,EAAjC,EAAoC;AAClC3B,QAAAA,CAAC,CAACI,IAAF,CAAOkC,OAAO,CAACX,CAAD,CAAd,EAAmBwB,GAAnB,GAAyB1B,SAAzB,CAAmCqC,MAAnC,CAA0C,sBAA1C;AACD;;AAED,UAAIC,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,GAAL,CAAS/B,GAAG,CAAC,CAAD,CAAH,GAASmB,IAAI,CAAC,CAAD,CAAtB,CAAT,EAAqCU,IAAI,CAACE,GAAL,CAAS/B,GAAG,CAAC,CAAD,CAAH,GAASmB,IAAI,CAAC,CAAD,CAAtB,CAArC,CAAf;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAYI,QAAZ;;AAEA,cAAQ7B,KAAR;AACE,aAAK,MAAL;AACE,kBAAQ6B,QAAR;AACE,iBAAK,CAAL;AACEnE,cAAAA,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,GAAtB;AACF;;AACA,iBAAK,CAAL;AACE7C,cAAAA,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAAtB;AACF;AANF;;AAQF;;AACA,aAAK,KAAL;AACE,kBAAOsB,QAAP;AACE,iBAAK,CAAL;AACEnE,cAAAA,KAAK,CAACkC,OAAN,CAAcW,IAAd;AACF;;AACA,iBAAK,CAAL;AACE7C,cAAAA,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,GAAtB;AACF;;AACA,iBAAK,CAAL;AACE7C,cAAAA,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,GAAtB;AACF;;AACA,iBAAK,CAAL;AACE7C,cAAAA,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAAtB;AACF;AAZF;;AAcF;AA1BF;;AA6BA,UAAI7C,KAAK,CAACkC,OAAN,CAAcW,IAAd,IAAsB,CAA1B,EAA6B;AAAI;AAC7B7C,QAAAA,KAAK,CAACkC,OAAN,CAAcW,IAAd,GAAqB,CAArB;;AACF,YAAI7C,KAAK,CAACkC,OAAN,CAAcC,MAAd,KAAyB,GAA7B,EAAkC;AAChCnC,UAAAA,KAAK,CAACkC,OAAN,CAAcC,MAAd,GAAuB,CAAvB;AACAhC,UAAAA,IAAI,CAAC0B,SAAL,CAAe0C,MAAf,CAAsB,MAAtB;AACD,SAHD,MAIK;AACHvE,UAAAA,KAAK,CAACkC,OAAN,CAAcC,MAAd,GAAuB,CAAvB;AACAhC,UAAAA,IAAI,CAAC0B,SAAL,CAAe0C,MAAf,CAAsB,MAAtB;AACD;AACF;AACF,KA5LuB,CA+LlB;;;AACR,aAASlC,UAAT,GAAsB;AACpB,WAAK,IAAImC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACpE,CAAC,CAACqE,IAAF,EAAhB,EAA0BD,CAAC,EAA3B,EAA+B;AAC7B,aAAK,IAAIE,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACtE,CAAC,CAACuE,IAAF,EAAhB,EAA0BD,CAAC,EAA3B,EAA+B;AAC7BtE,UAAAA,CAAC,CAACI,IAAF,CAAO,CAACgE,CAAD,EAAGE,CAAH,CAAP,EAAcnB,GAAd,GAAoB1B,SAApB,CAA8BqC,MAA9B,CAAqC,sBAArC;AACA9D,UAAAA,CAAC,CAACI,IAAF,CAAO,CAACgE,CAAD,EAAGE,CAAH,CAAP,EAAcE,QAAd,CAAuB,OAAvB,EAAgCnB,SAAhC;AACD;AACF;AACF;AACA;AACF;;AAAA;;AAED,SAASO,GAAT,GAAe;AACb,MAAIa,QAAQ,GAAG5E,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAf;AACA,MAAI4E,QAAQ,GAAG7E,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAf;;AAEA,MAAIH,MAAM,IAAI,CAAd,EAAiB;AACf+E,IAAAA,QAAQ,CAACjD,SAAT,CAAmBqC,MAAnB,CAA0B,OAA1B;AACD,GAFD,MAEO,IAAInE,MAAM,IAAI,CAAd,EAAiB;AACtB8E,IAAAA,QAAQ,CAAChD,SAAT,CAAmBqC,MAAnB,CAA0B,OAA1B;AACD;AAEF;;AACDzE,GAAG,CAACC,MAAJ,CAAWC,aAAX,CAAyB,GAAzB,EAA8B,YAAW;AACvCF,EAAAA,GAAG,CAACG,OAAJ,CAAYC,UAAZ,CAAuB,MAAvB;AACD,CAFD","file":"script.d573be0b.map","sourceRoot":"..\\src","sourcesContent":["oxo.inputs.listenKeyOnce('enter', function() {    //commande pour passer du screen \"home\" au screen \"game\"  \r\n  oxo.screens.loadScreen('game', game);           //en meme temps que le screen \"game\" la commande active la fonction 'game' qui active tout lescript pour la page \"game\"        \r\n});                                                 \r\n\r\nvar winner;   //to memorize who win\r\n\r\nfunction game(){    \r\n  var board = document.getElementById('game__board');\r\n  var sign = document.getElementById('sign');\r\n    \r\n  // create board\r\n  var b = jsboard.board({attach:\"game__board\", size:\"11x13\"});\r\n  b.cell(\"each\").style({width:\"73px\", height:\"66px\"});\r\n\r\n  // Couleur tableau \r\n  b.cell(\"each\").style({ \r\n      background: \"transparent\",\r\n  });\r\n\r\n  // setup pieces\r\n\r\n  var piece_gb = jsboard.piece({text:\"gb\", textIndent:\"-9999px\", width:\"70px\", height:\"65px\", margin:\"0 auto\" });\r\n  var piece_fb = jsboard.piece({text:\"fb\", textIndent:\"-9999px\", width:\"70px\", height:\"65px\", margin:\"0 auto\" });\r\n  var piece_lb = jsboard.piece({text:\"lb\", textIndent:\"-9999px\", width:\"70px\", height:\"65px\", margin:\"0 auto\" });\r\n  var piece_cb = jsboard.piece({text:\"cb\", textIndent:\"-9999px\", width:\"70px\", height:\"65px\", margin:\"0 auto\" });\r\n  var piece_gr = jsboard.piece({text:\"gr\", textIndent:\"-9999px\", width:\"70px\", height:\"65px\", margin:\"0 auto\" });\r\n  var piece_fr = jsboard.piece({text:\"fr\", textIndent:\"-9999px\", width:\"70px\", height:\"65px\", margin:\"0 auto\" });\r\n  var piece_lr = jsboard.piece({text:\"lr\", textIndent:\"-9999px\", width:\"70px\", height:\"65px\", margin:\"0 auto\" });\r\n  var piece_cr = jsboard.piece({text:\"cr\", textIndent:\"-9999px\", width:\"70px\", height:\"65px\", margin:\"0 auto\" });\r\n\r\n  // utiliser les pièces dans le tableau \r\n  var bluePieces = [\r\n    piece_gb.clone(), \r\n    piece_fb.clone(), \r\n    piece_fb.clone(),\r\n    piece_fb.clone(),\r\n    piece_fb.clone(),\r\n    piece_lb.clone(), \r\n    piece_lb.clone(),\r\n    piece_lb.clone(),\r\n    piece_lb.clone(),\r\n    piece_cb.clone(), \r\n    piece_cb.clone(), \r\n  ];\r\n  var redPieces = [\r\n    piece_gr.clone(),\r\n    piece_fr.clone(),\r\n    piece_fr.clone(),\r\n    piece_fr.clone(),\r\n    piece_fr.clone(),\r\n    piece_lr.clone(),\r\n    piece_lr.clone(),\r\n    piece_lr.clone(),\r\n    piece_lr.clone(),\r\n    piece_cr.clone(),\r\n    piece_cr.clone(),\r\n  ];\r\n\r\n\r\n  // placer les pièces sur le tableau\r\n\r\n  // place bluepiece table\r\n  b.cell([10,6]).place(bluePieces[0]);\r\n  b.cell([10,9]).place(bluePieces[1]);\r\n  b.cell([10,7]).place(bluePieces[2]);\r\n  b.cell([10,5]).place(bluePieces[3]);\r\n  b.cell([10,3]).place(bluePieces[4]);\r\n  b.cell([9,4]).place(bluePieces[5]);\r\n  b.cell([9,5]).place(bluePieces[6]);\r\n  b.cell([9,7]).place(bluePieces[7]);\r\n  b.cell([9,8]).place(bluePieces[8]);\r\n  b.cell([10,1]).place(bluePieces[9]);\r\n  b.cell([10,11]).place(bluePieces[10]);\r\n\r\n\r\n  //classe pour conner l'image du jeton avec les probles de compatibilité des librairies\r\n  bluePieces[0].classList.add('hey0');\r\n  bluePieces[1].classList.add('hey1');\r\n  bluePieces[2].classList.add('hey2');\r\n  bluePieces[3].classList.add('hey3');\r\n  bluePieces[4].classList.add('hey4');\r\n  bluePieces[5].classList.add('hey5');\r\n  bluePieces[6].classList.add('hey6');\r\n  bluePieces[7].classList.add('hey7');\r\n  bluePieces[8].classList.add('hey8');\r\n  bluePieces[9].classList.add('hey9');\r\n  bluePieces[10].classList.add('hey10');\r\n\r\n  redPieces[0].classList.add('heyy0');\r\n  redPieces[1].classList.add('heyy1');\r\n  redPieces[2].classList.add('heyy2');\r\n  redPieces[3].classList.add('heyy3');\r\n  redPieces[4].classList.add('heyy4');\r\n  redPieces[5].classList.add('heyy5');\r\n  redPieces[6].classList.add('heyy6');\r\n  redPieces[7].classList.add('heyy7');\r\n  redPieces[8].classList.add('heyy8');\r\n  redPieces[9].classList.add('heyy9');\r\n  redPieces[10].classList.add('heyy10');\r\n\r\n  // place redpiece table\r\n  b.cell([0,6]).place(redPieces[0]);\r\n  b.cell([0,9]).place(redPieces[1]);\r\n  b.cell([0,7]).place(redPieces[2]);\r\n  b.cell([0,5]).place(redPieces[3]);\r\n  b.cell([0,3]).place(redPieces[4]);\r\n  b.cell([1,4]).place(redPieces[5]);\r\n  b.cell([1,5]).place(redPieces[6]);\r\n  b.cell([1,7]).place(redPieces[7]);\r\n  b.cell([1,8]).place(redPieces[8]);\r\n  b.cell([0,1]).place(redPieces[9]);\r\n  b.cell([0,11]).place(redPieces[10]);\r\n\r\n\r\n  for (var i=0; i<bluePieces.length; i++){\r\n    bluePieces[i].addEventListener(\"click\", function() { if (board.dataset.player === \"2\") {\r\n      showMoves(this); };\r\n    });\r\n  };\r\n\r\n  for (var i=0; i<redPieces.length; i++){\r\n    redPieces[i].addEventListener(\"click\", function() { if (board.dataset.player === \"1\") {\r\n      showMoves(this); };\r\n    });\r\n  }\r\n\r\n  function showMoves(piece) {\r\n    resetBoard();\r\n\r\n    var token;    //var to memorize the token selectionned with the correct amount of movement points\r\n    var loc = b.cell(piece.parentNode).where();\r\n    var newLocs = [];\r\n    var thisPiece = b.cell(piece.parentNode).get();\r\n\r\n    if ((thisPiece==\"cb\" || thisPiece==\"cr\") && board.dataset.mvmt == 0 ) {\r\n      token = 'cav';\r\n      newLocs.push(\r\n        [loc[0]-1,loc[1]],[loc[0]-3,loc[1]],[loc[0]-2,loc[1]],[loc[0]-4,loc[1]],\r\n        [loc[0],loc[1]-1],[loc[0],loc[1]-3],[loc[0],loc[1]-2],[loc[0],loc[1]-4],\r\n        [loc[0]+1,loc[1]],[loc[0]+3,loc[1]],[loc[0]+2,loc[1]],[loc[0]+4,loc[1]],\r\n        [loc[0],loc[1]+1],[loc[0],loc[1]+3],[loc[0],loc[1]+2],[loc[0],loc[1]+4],\r\n      );\r\n    }\r\n\r\n    if ((thisPiece==\"cb\" || thisPiece==\"cr\") && board.dataset.mvmt == 1 ) {\r\n      token = 'cav';\r\n      newLocs.push(\r\n        [loc[0]-1,loc[1]],[loc[0]-3,loc[1]],[loc[0]-2,loc[1]],\r\n        [loc[0],loc[1]-1],[loc[0],loc[1]-3],[loc[0],loc[1]-2],\r\n        [loc[0]+1,loc[1]],[loc[0]+3,loc[1]],[loc[0]+2,loc[1]],\r\n        [loc[0],loc[1]+1],[loc[0],loc[1]+3],[loc[0],loc[1]+2]\r\n      );\r\n    }\r\n\r\n    if ((thisPiece==\"cb\" || thisPiece==\"cr\") && board.dataset.mvmt == 3 ) {\r\n      token = 'cav';\r\n      newLocs.push(\r\n        [loc[0]-1,loc[1]],\r\n        [loc[0],loc[1]-1],\r\n        [loc[0]+1,loc[1]],\r\n        [loc[0],loc[1]+1]\r\n      );\r\n    }\r\n\r\n    if ((thisPiece==\"cb\" || thisPiece==\"cr\") && board.dataset.mvmt == 2) {\r\n      token = 'cav';\r\n      newLocs.push(\r\n        [loc[0]-1,loc[1]],[loc[0]-2,loc[1]],\r\n        [loc[0],loc[1]-1],[loc[0],loc[1]-2],\r\n        [loc[0]+1,loc[1]],[loc[0]+2,loc[1]],\r\n        [loc[0],loc[1]+1],[loc[0],loc[1]+2],\r\n      );\r\n    }\r\n    \r\n\r\n    if (thisPiece==\"gb\" || thisPiece==\"gr\") {\r\n      token = 'foot';\r\n      newLocs.push(\r\n        [loc[0]-1,loc[1]],\r\n        [loc[0],loc[1]-1],\r\n        [loc[0]+1,loc[1]],\r\n        [loc[0],loc[1]+1] \r\n      );\r\n    }\r\n\r\n    if ((thisPiece==\"fb\" || thisPiece==\"lb\" || thisPiece==\"fr\" || thisPiece==\"lr\") && board.dataset.mvmt >= 2) {  //to reduce range after 1 mvmnt\r\n      token = 'foot';\r\n      newLocs.push(\r\n        [loc[0]-1,loc[1]],\r\n        [loc[0],loc[1]-1],\r\n        [loc[0]+1,loc[1]],\r\n        [loc[0],loc[1]+1]\r\n      ); \r\n    }\r\n\r\n    if ((thisPiece==\"fb\" || thisPiece==\"lb\" || thisPiece==\"fr\" || thisPiece==\"lr\") && board.dataset.mvmt <= 1) {\r\n      token = 'foot';\r\n      newLocs.push(\r\n        [loc[0]-1,loc[1]],[loc[0]-2,loc[1]], \r\n        [loc[0],loc[1]-1],[loc[0],loc[1]-2], \r\n        [loc[0]+1,loc[1]],[loc[0]+2,loc[1]], \r\n        [loc[0],loc[1]+1],[loc[0],loc[1]+2]\r\n      ); \r\n    }\r\n\r\n    // enleve les déplacements impossible et permet de manger les jetons ennemis\r\n\r\n    if (board.dataset.player === \"2\") {\r\n              \r\n      (function removeIllegalMoves(arr) {\r\n          var fixedLocs = [];\r\n          for (var i=0; i<arr.length; i++)    \r\n          if (b.cell(arr[i]).get() == null || b.cell(arr[i]).get().slice(-1) == 'r') \r\n          fixedLocs.push(arr[i]); \r\n          newLocs = fixedLocs; //fixed coups légaux\r\n        })(newLocs); \r\n      };\r\n\r\n    if (board.dataset.player === \"1\") {\r\n              \r\n      (function removeIllegalMoves(arr) {\r\n        var fixedLocs = [];\r\n        for (var i=0; i<arr.length; i++)    \r\n        if (b.cell(arr[i]).get() == null || b.cell(arr[i]).get().slice(-1) == 'b')  \r\n        fixedLocs.push(arr[i]); \r\n        newLocs = fixedLocs;\r\n      })(newLocs); \r\n    };\r\n\r\n    bindMoveLocs = newLocs.slice();\r\n    bindMovePiece = piece; \r\n    bindMoveEvents(bindMoveLocs); \r\n\r\n    function bindMoveEvents(locs) {\r\n      for (var i=0; i<locs.length; i++) {\r\n        b.cell(locs[i]).DOM().classList.add(\"moveable__indication\");\r\n        b.cell(locs[i]).on(\"click\", movePiece);  \r\n      }\r\n    }  \r\n\r\n    // move piece to new location when clicked\r\n    function movePiece() {\r\n      var dest = b.cell(this).where();\r\n      var defender = b.cell(this).get();\r\n      var attacker = piece.innerText;\r\n\r\n      console.log(attacker + ' attacks ' + defender);\r\n      \r\n      switch (defender) {\r\n        case null :\r\n        break;\r\n        default :\r\n          switch(defender[0]) {\r\n            case 'g' :\r\n              if (board.dataset.player === \"2\") {\r\n                winner = 1;\r\n              }\r\n              else if (board.dataset.player === \"1\")\r\n                winner = 2;\r\n              oxo.screens.loadScreen('end', end);\r\n              break;\r\n          }\r\n        break;\r\n      }\r\n\r\n      b.cell(this).place(piece);\r\n      b.removeEvents(\"click\", movePiece);\r\n      for (var i=0; i<newLocs.length; i++){ \r\n        b.cell(newLocs[i]).DOM().classList.remove(\"moveable__indication\");\r\n      }\r\n          \r\n      var distance = Math.max(Math.abs(loc[0] - dest[0]), Math.abs(loc[1] - dest[1]));\r\n      console.log(distance);\r\n\r\n      switch (token) {\r\n        case 'foot':\r\n          switch (distance) {\r\n            case 1:\r\n              board.dataset.mvmt += '2';\r\n            break;\r\n            case 2:\r\n              board.dataset.mvmt += 4;\r\n            break;\r\n          } \r\n        break;\r\n        case 'cav':\r\n          switch(distance) {\r\n            case 1:\r\n              board.dataset.mvmt++;\r\n            break;\r\n            case 2:\r\n              board.dataset.mvmt += '2';\r\n            break;\r\n            case 3:\r\n              board.dataset.mvmt += '3';\r\n            break;\r\n            case 4:\r\n              board.dataset.mvmt += 4;\r\n            break;\r\n          }\r\n        break\r\n      }\r\n\r\n      if (board.dataset.mvmt >= 4) {   //structure pour enregustrer les points d'actions et changer de joueurs\r\n          board.dataset.mvmt = 0;\r\n        if (board.dataset.player === \"1\") {\r\n          board.dataset.player = 2;\r\n          sign.classList.toggle('cake');\r\n        }\r\n        else {\r\n          board.dataset.player = 1;\r\n          sign.classList.toggle('cake');\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n          // remove previous green spaces and event listeners\r\n  function resetBoard() {\r\n    for (var r=0; r<b.rows(); r++) {\r\n      for (var c=0; c<b.cols(); c++) {\r\n        b.cell([r,c]).DOM().classList.remove(\"moveable__indication\");\r\n        b.cell([r,c]).removeOn(\"click\", movePiece);\r\n      }\r\n    }\r\n  }\r\n  }  \r\n};\r\n\r\nfunction end() {\r\n  var endimgp1 = document.getElementById('endimgp1');\r\n  var endimgp2 = document.getElementById('endimgp2');\r\n\r\n  if (winner == 2) {\r\n    endimgp2.classList.remove('bcake');\r\n  } else if (winner == 1) {\r\n    endimgp1.classList.remove('bcake');\r\n  }\r\n\r\n}\r\noxo.inputs.listenKeyOnce('q', function() {\r\n  oxo.screens.loadScreen('home');           \r\n});\r\n\r\n\r\n"]}